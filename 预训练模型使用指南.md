# 🎯 预训练模型使用指南 - 无需自己训练！

## 方案选择

### ⭐⭐⭐ 推荐方案1：PaddleOCR（最简单）

**优点**：
- ✅ 不需要训练任何模型
- ✅ 直接使用预训练的OCR模型
- ✅ 识别棋子上的汉字
- ✅ 安装即用

**适用场景**：
- 棋子上有清晰的汉字
- 标准象棋棋子样式

#### 安装方法

```bash
pip install paddleocr
```

#### 使用方法

```python
python chess_gui.py
```

程序会自动尝试使用OCR识别！

---

### ⭐⭐ 方案2：下载现成的YOLO模型

从开源社区下载已训练好的模型。

#### 获取途径

**1. Roboflow Universe（推荐）**

访问：https://universe.roboflow.com/

搜索关键词：
- `chinese chess`
- `xiangqi`
- `象棋`

步骤：
1. 找到中国象棋检测项目
2. 下载模型（选择YOLOv8 PyTorch格式）
3. 将模型文件重命名为 `chess_yolo.pt`
4. 放入项目的 `models/` 目录

**2. GitHub搜索**

搜索：`chinese chess yolo`  
找到有预训练模型的项目，下载.pt文件

**3. HuggingFace**

访问：https://huggingface.co/models

搜索：`chinese chess detection`

#### 使用方法

```bash
# 1. 安装YOLO
pip install ultralytics

# 2. 将模型放入models目录
#    models/chess_yolo.pt

# 3. 运行程序
python chess_gui.py
```

程序会自动检测并使用YOLO模型！

---

### ⭐ 方案3：使用通用检测器（圆形检测+OCR）

完全不需要任何训练，使用OpenCV的圆形检测+OCR。

#### 安装

```bash
pip install paddleocr
```

#### 集成到程序

在 `chess_assistant.py` 中添加：

```python
from universal_chess_detector import UniversalChessDetector

# 在__init__中
self.universal_detector = UniversalChessDetector()

# 在recognize_pieces中
if self.universal_detector.ocr:
    fen = self.universal_detector.recognize_from_image(board_image)
    if fen:
        return fen
```

---

## 📦 完整安装步骤（推荐方案）

### 最简单的方案：OCR识别

```bash
# 步骤1：安装依赖
pip install paddleocr

# 步骤2：运行程序
python chess_gui.py

# 完成！程序会自动使用OCR识别棋子
```

### 如果要用YOLO（更准确）

```bash
# 步骤1：安装依赖
pip install ultralytics

# 步骤2：下载预训练模型
# 访问 https://universe.roboflow.com/
# 搜索 "chinese chess"
# 下载模型并重命名为 chess_yolo.pt

# 步骤3：放置模型
# 将 chess_yolo.pt 放入 models/ 目录

# 步骤4：运行程序
python chess_gui.py

# 完成！程序会自动使用YOLO模型
```

---

## 🔍 可用的预训练模型资源

### 1. Roboflow Universe

**最推荐！** 有很多现成的中国象棋检测项目

网址：https://universe.roboflow.com/

示例项目搜索结果：
- "Chinese Chess Pieces Detection"
- "Xiangqi Board Recognition"  
- 等等...

**优点**：
- 免费下载
- 多种格式（YOLOv8, YOLOv5等）
- 有性能指标
- 可直接使用

### 2. GitHub项目

搜索关键词在GitHub：
```
chinese chess yolo
chinese chess detection
xiangqi object detection
中国象棋识别
```

### 3. 百度飞桨（PaddlePaddle）

搜索飞桨模型库：
```
中国象棋识别
象棋检测
```

### 4. 天池/Kaggle数据集

有时会有比赛提供的预训练模型

---

## 🎯 模型性能对比

| 方案 | 准确率 | 速度 | 安装难度 | 推荐度 |
|------|--------|------|---------|--------|
| PaddleOCR | 70-85% | 中等 | ⭐简单 | ⭐⭐⭐ |
| YOLO预训练 | 90-95% | 快 | ⭐⭐中等 | ⭐⭐⭐ |
| 圆形检测+OCR | 60-75% | 慢 | ⭐简单 | ⭐⭐ |
| 手动FEN | 100% | 快 | ⭐最简单 | ⭐⭐⭐ |

---

## 💡 实际使用建议

### 场景1：快速开始
```
使用：手动FEN输入
理由：100%准确，最快
```

### 场景2：想自动识别，不想训练
```
使用：PaddleOCR
安装：pip install paddleocr
优点：安装即用
```

### 场景3：追求高准确率
```
使用：下载YOLO预训练模型
来源：Roboflow Universe
准确率：90%+
```

### 场景4：研究学习
```
使用：自己训练YOLO模型
参考：YOLO训练指南.md
时间：需要几小时到几天
```

---

## 📝 当前程序支持的识别方式

程序会按以下顺序尝试：

1. **YOLO模型**（如果 `models/chess_yolo.pt` 存在）
2. **传统颜色识别**（内置，基于颜色+位置）
3. **手动FEN输入**（100%准确）

### 查看使用了哪种方式

运行程序时会有提示：
```
✓ YOLO检测器已加载，将使用深度学习识别
或
ℹ YOLO模型未找到，使用传统颜色识别
```

---

## 🚀 快速开始检查清单

- [ ] 安装基础依赖：`pip install -r requirements.txt`
- [ ] 下载引擎：Pikafish引擎放入`engine/`
- [ ] 选择识别方案：
  - [ ] 方案A：手动FEN（推荐新手）
  - [ ] 方案B：安装PaddleOCR `pip install paddleocr`
  - [ ] 方案C：下载YOLO模型到`models/`
- [ ] 运行程序：`python chess_gui.py`

---

## ❓ 常见问题

### Q: 我应该用哪种方案？
A: 
- **新手/快速使用**：手动FEN输入
- **要自动识别但不想折腾**：安装PaddleOCR
- **追求高准确率**：下载YOLO预训练模型

### Q: 在哪下载YOLO模型？
A: Roboflow Universe最方便：https://universe.roboflow.com/

### Q: PaddleOCR安装失败怎么办？
A: 
```bash
# 使用国内镜像
pip install paddleocr -i https://pypi.tuna.tsinghua.edu.cn/simple

# 或安装轻量版
pip install paddleocr --no-deps
```

### Q: YOLO模型文件名一定要是chess_yolo.pt吗？
A: 是的，或者修改代码中的路径

### Q: 可以同时安装多种方案吗？
A: 可以！程序会自动选择最好的方案

---

## 🔗 有用的链接

- **Roboflow Universe**: https://universe.roboflow.com/
- **PaddleOCR**: https://github.com/PaddlePaddle/PaddleOCR
- **YOLOv8**: https://docs.ultralytics.com/
- **HuggingFace**: https://huggingface.co/models

---

**总结**：最简单的方式就是使用手动FEN输入，想自动识别就安装PaddleOCR！🎯

